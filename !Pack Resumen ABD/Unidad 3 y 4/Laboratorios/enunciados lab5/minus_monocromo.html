<!doctype html>
<html lang="en">
<head>
<title>minus_monocromo</title>
<meta name="generator" content="Etherpad">
<meta name="author" content="Etherpad">
<meta name="changedby" content="Etherpad">
<meta charset="utf-8">
<style>
* {
  font-family: arial, sans-serif;
  font-size: 13px;
  line-height: 17px;
}
ul.indent {
  list-style-type: none;
}
ol {
  list-style-type: none;
  padding-left: 0;
}
body > ol {
  counter-reset: first second third fourth fifth sixth seventh eighth ninth tenth eleventh twelfth thirteenth fourteenth fifteenth sixteenth;
}
ol > li:before {
  content: counter(first) ". ";
  counter-increment: first;
}
ol > ol > li:before {
  content: counter(first) "." counter(second) ". ";
  counter-increment: second;
}
ol > ol > ol > li:before {
  content: counter(first) "." counter(second) "." counter(third) ". ";
  counter-increment: third;
}
ol > ol > ol > ol > li:before {
  content: counter(first) "." counter(second) "." counter(third) "." counter(fourth) ". ";
  counter-increment: fourth;
}
ol > ol > ol > ol > ol > li:before {
  content: counter(first) "." counter(second) "." counter(third) "." counter(fourth) "." counter(fifth) ". ";
  counter-increment: fifth;
}
ol > ol > ol > ol > ol > ol > li:before {
  content: counter(first) "." counter(second) "." counter(third) "." counter(fourth) "." counter(fifth) "." counter(sixth) ". ";
  counter-increment: sixth;
}
ol > ol > ol > ol > ol > ol > ol > li:before {
  content: counter(first) "." counter(second) "." counter(third) "." counter(fourth) "." counter(fifth) "." counter(sixth) "." counter(seventh) ". ";
  counter-increment: seventh;
}
ol > ol > ol > ol > ol > ol > ol > ol > li:before {
  content: counter(first) "." counter(second) "." counter(third) "." counter(fourth) "." counter(fifth) "." counter(sixth) "." counter(seventh) "." counter(eighth) ". ";
  counter-increment: eighth;
}
ol > ol > ol > ol > ol > ol > ol > ol > ol > li:before {
  content: counter(first) "." counter(second) "." counter(third) "." counter(fourth) "." counter(fifth) "." counter(sixth) "." counter(seventh) "." counter(eighth) "." counter(ninth) ". ";
  counter-increment: ninth;
}
ol > ol > ol > ol > ol > ol > ol > ol > ol > ol > li:before {
  content: counter(first) "." counter(second) "." counter(third) "." counter(fourth) "." counter(fifth) "." counter(sixth) "." counter(seventh) "." counter(eighth) "." counter(ninth) "." counter(tenth) ". ";
  counter-increment: tenth;
}
ol > ol > ol > ol > ol > ol > ol > ol > ol > ol > ol > li:before {
  content: counter(first) "." counter(second) "." counter(third) "." counter(fourth) "." counter(fifth) "." counter(sixth) "." counter(seventh) "." counter(eighth) "." counter(ninth) "." counter(tenth) "." counter(eleventh) ". ";
  counter-increment: eleventh;
}
ol > ol > ol > ol > ol > ol > ol > ol > ol > ol > ol > ol > li:before {
  content: counter(first) "." counter(second) "." counter(third) "." counter(fourth) "." counter(fifth) "." counter(sixth) "." counter(seventh) "." counter(eighth) "." counter(ninth) "." counter(tenth) "." counter(eleventh) "." counter(twelfth) ". ";
  counter-increment: twelfth;
}
ol > ol > ol > ol > ol > ol > ol > ol > ol > ol > ol > ol > ol > li:before {
  content: counter(first) "." counter(second) "." counter(third) "." counter(fourth) "." counter(fifth) "." counter(sixth) "." counter(seventh) "." counter(eighth) "." counter(ninth) "." counter(tenth) "." counter(eleventh) "." counter(twelfth) "." counter(thirteenth) ". ";
  counter-increment: thirteenth;
}
ol > ol > ol > ol > ol > ol > ol > ol > ol > ol > ol > ol > ol > ol > li:before {
  content: counter(first) "." counter(second) "." counter(third) "." counter(fourth) "." counter(fifth) "." counter(sixth) "." counter(seventh) "." counter(eighth) "." counter(ninth) "." counter(tenth) "." counter(eleventh) "." counter(twelfth) "." counter(thirteenth) "." counter(fourteenth) ". ";
  counter-increment: fourteenth;
}
ol > ol > ol > ol > ol > ol > ol > ol > ol > ol > ol > ol > ol > ol > ol > li:before {
  content: counter(first) "." counter(second) "." counter(third) "." counter(fourth) "." counter(fifth) "." counter(sixth) "." counter(seventh) "." counter(eighth) "." counter(ninth) "." counter(tenth) "." counter(eleventh) "." counter(twelfth) "." counter(thirteenth) "." counter(fourteenth) "." counter(fifteenth) ". ";
  counter-increment: fifteenth;
}
ol > ol > ol > ol > ol > ol > ol > ol > ol > ol > ol > ol > ol > ol > ol > ol > li:before {
  content: counter(first) "." counter(second) "." counter(third) "." counter(fourth) "." counter(fifth) "." counter(sixth) "." counter(seventh) "." counter(eighth) "." counter(ninth) "." counter(tenth) "." counter(eleventh) "." counter(twelfth) "." counter(thirteenth) "." counter(fourteenth) "." counter(fifteenth) "." counter(sixteenth) ". ";
  counter-increment: sixteenth;
}
ol {
  text-indent: 0px;
}
ol > ol {
  text-indent: 10px;
}
ol > ol > ol {
  text-indent: 20px;
}
ol > ol > ol > ol {
  text-indent: 30px;
}
ol > ol > ol > ol > ol {
  text-indent: 40px;
}
ol > ol > ol > ol > ol > ol {
  text-indent: 50px;
}
ol > ol > ol > ol > ol > ol > ol {
  text-indent: 60px;
}
ol > ol > ol > ol > ol > ol > ol > ol {
  text-indent: 70px;
}
ol > ol > ol > ol > ol > ol > ol > ol > ol {
  text-indent: 80px;
}
ol > ol > ol > ol > ol > ol > ol > ol > ol > ol {
  text-indent: 90px;
}
ol > ol > ol > ol > ol > ol > ol > ol > ol > ol > ol {
  text-indent: 100px;
}
ol > ol > ol > ol > ol > ol > ol > ol > ol > ol > ol > ol {
  text-indent: 110px;
}
ol > ol > ol > ol > ol > ol > ol > ol > ol > ol > ol > ol > ol {
  text-indent: 120px;
}
ol > ol > ol > ol > ol > ol > ol > ol > ol > ol > ol > ol > ol > ol {
  text-indent: 130px;
}
ol > ol > ol > ol > ol > ol > ol > ol > ol > ol > ol > ol > ol > ol > ol {
  text-indent: 140px;
}
ol > ol > ol > ol > ol > ol > ol > ol > ol > ol > ol > ol > ol > ol > ol > ol {
  text-indent: 150px;
}
h1{font-size: 2.0em;line-height: 120%;}   h2{font-size: 1.5em;line-height: 120%;}   h3{font-size: 1.17em;line-height: 120%;}   h4{line-height: 120%;}   h5{font-size: 0.83em;line-height: 120%;}   h6{font-size: 0.75em;line-height: 120%;}   code{font-family: monospace;}[data-color="black"], .color\:black  { color:black; }
[data-color="red"], .color\:red    { color:red; }
[data-color="green"], .color\:green  { color:green; }
[data-color="blue"], .color\:blue   { color:blue; }
[data-color="yellow"], .color\:yellow { color:yellow; }
[data-color="orange"], .color\:orange { color:orange; }
</style>
</head>
<body>
No s&#233; qu&#233; me sucede.<br><br>Ayer sinceramente estaba cagado de miedo, sin embargo hoy lo que me domina es un sentimiento de tristeza.<br><br>&#191;Por qu&#233;, Ale? &#191;Qu&#233; te sucedi&#243;?<br><br>Te voy a contar un poco m&#225;s... pero wow, ahora que lo pienso, es algo largo de escribir, mejor te lo cuento en un audio:&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;<br><a href="https&#x3a;&#x2F;&#x2F;drive&#x2e;google&#x2e;com&#x2F;open&#x3f;id&#x3d;1WARAFeekGWD2c8EWTZtYE&#x5f;jIbJq3YliP">https:&#x2F;&#x2F;drive.google.com&#x2F;open?id=1WARAFeekGWD2c8EWTZtYE_jIbJq3YliP</a><br><br>Independientemente de que fu&#233;ramos tan amigos con Ale, de que &#233;l sea un s&#250;per hacker y que nadie podr&#237;a ni siquiera imaginar que tuviera tan macabros planes, le voy a detener: estoy decidido a ello... lo peor es que estoy seguro que esa idea de &quot;regalar&quot; el t&#237;tulo destruyendo la universidad ha convencido a mucha gente... &#191;qu&#233; opin&#225;s? &#191;ser&#225; que puedo conf&#237;ar en vos? s&#237;, ya s&#233; que resolviste dos problemas pero... no, no estoy totalmente convencido: si tu vida estuviera apostada en este juego como lo est&#225; la m&#237;a, sin duda me comprender&#237;as.&nbsp;<br><br>En tal sentido te pido que resuelvas otro desaf&#237;o m&#225;s, as&#237; sabr&#233; de qu&#233; lado est&#225;s.<br><br>Existe un potencial problema de incoherencia entre la clasificaci&#243;n de miembro en sus subclases y el atributo denominacion_departamento... por ejemplo, ser&#237;a incorrecto que un miembro de la subclase ingenieria tuviera en el atributo mencionado en la superclase &quot;ventas&quot;. En tal sentido hay que desarrollar una funci&#243;n (y un trigger que la ejecute) que haga lo siguiente:<br>1) Cuando se inserte en la tabla miembro debe comprobarse la coincidencia del departamento expresado en el atributo con la existencia de este miembro en la subclase correcta. Si no est&#225;, se debe rechazar la inserci&#243;n.<br>2) Cuando se actualice el atributo departamento de miembro, entonces debe moverse al miembro a la subclase que corresponda. Esto implica borrar el miembro de la subclase y reinsertarlo donde corresponde. Ten en cuenta que:<br>&nbsp;&nbsp;&nbsp; a) ya existe un trigger que al borrar de una subclase (ingenieria, ventas o gestion) borra autom&#225;ticamente de la superclase miembro,&nbsp;<br>&nbsp;&nbsp;&nbsp; b) hay otro trigger que impide que se inserte directo en la superclase para validar la totalidad de esa especializaci&#243;n as&#237; como que se respete que<br>&nbsp;&nbsp;&nbsp; la especializaci&#243;n es disjunta: esto implica que dentro de la funci&#243;n que programes, cuando quieras insertar en una subclase tendr&#225;s que hacer<br>&nbsp;&nbsp;&nbsp; una transacci&#243;n con el correspondiente FK diferido.<br><br>La funci&#243;n deber&#225; tener la siguiente declaraci&#243;n:<br><br>*CREATE OR REPLACE FUNCTION miembro_subclase_trabaja() RETURNS trigger AS $$<br><br>Y el trigger ser&#237;a as&#237;:<br><br>*CREATE TRIGGER miembro_trabaja_subclases AFTER INSERT OR UPDATE ON miembro FOR EACH ROW EXECUTE PROCEDURE miembro_subclase_trabaja();<br>&nbsp;<br>Una vez creada la funci&#243;n y declarado el trigger puedes probar lo que hiciste con los siguientes datos:<br>&nbsp;&nbsp;&nbsp;&nbsp;<br>*BEGIN;<br>*<br>*SET CONSTRAINTS fk_gestion_miembro DEFERRED;<br>*<br>*insert into gestion values (&#x27;08872144-5&#x27;);&nbsp;<br>*insert into miembro values (&#x27;08872144-5&#x27;,&#x27;Astrid&#x27;,&#x27;Ventas&#x27;);&nbsp;<br>*<br>*COMMIT;<br><br>La transacci&#243;n anterior fallar&#225; por haber insertado en gesti&#243;n y luego indicar que era de ventas.<br><br>*BEGIN;<br>*<br>*SET CONSTRAINTS fk_gestion_miembro DEFERRED;<br>*<br>*insert into gestion values (&#x27;08872144-5&#x27;);&nbsp;<br>*insert into miembro values (&#x27;08872144-5&#x27;,&#x27;Astrid&#x27;,&#x27;Gesti&#243;n&#x27;);&nbsp;<br>*<br>*COMMIT;<br><br>Esta s&#237; funcionar&#225; bien.<br><br>Prueba adem&#225;s que funciona la actualizaci&#243;n de subclase:<br>&nbsp;&nbsp;&nbsp;&nbsp;<br>*update miembro set denominacion_departamento = &#x27;Ventas&#x27; where DUI=&#x27;08872144-5&#x27;;<br><br>Gracias de nuevo por tu ayuda, espero que entiendas mi precauci&#243;n.<br>
</body>
</html>
